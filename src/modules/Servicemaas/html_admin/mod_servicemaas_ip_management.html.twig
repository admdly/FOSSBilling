{% extends request.ajax ? 'layout_blank.html.twig' : 'layout_default.html.twig' %}

{% block meta_title %}{{ 'MAAS IP Management'|trans }}{% endblock %}

{% set active_menu = 'maas' %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ '/'|alink }}">
                <svg class="icon">
                    <use xlink:href="#home" />
                </svg>
            </a>
        </li>
        <li class="breadcrumb-item">
            <a href="{{ 'servicemaas'|alink }}">{{ 'MAAS'|trans }}</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ 'IP Management'|trans }}</li>
    </ol>
{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">{{ 'MAAS IP Management'|trans }}</h3>
    </div>
    <div class="card-body">
        {% if error %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
        {% else %}
            <h4>{{ 'IP Addresses'|trans }}</h4>
            <div class="table-responsive">
                <table class="table card-table table-vcenter text-nowrap datatable">
                    <thead>
                        <tr>
                            <th>{{ 'IP Address'|trans }}</th>
                            <th>{{ 'Status'|trans }}</th>
                            <th>{{ 'Owner'|trans }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for ip in ip_addresses %}
                            <tr>
                                <td>{{ ip.ip_address }}</td>
                                <td>{{ ip.status }}</td>
                                <td>{{ ip.owner }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="3" class="text-center">{{ 'No IP addresses found.'|trans }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <h4 class="mt-4">{{ 'Subnets'|trans }}</h4>
            <div class="table-responsive">
                <table class="table card-table table-vcenter text-nowrap datatable">
                    <thead>
                        <tr>
                            <th>{{ 'Name'|trans }}</th>
                            <th>{{ 'CIDR'|trans }}</th>
                            <th>{{ 'VLAN'|trans }}</th>
                            <th>{{ 'Gateway IP'|trans }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for subnet in subnets %}
                            <tr>
                                <td>{{ subnet.name }}</td>
                                <td>{{ subnet.cidr }}</td>
                                <td>{{ subnet.vlan.name }} ({{ subnet.vlan.vid }})</td>
                                <td>{{ subnet.gateway_ip }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="4" class="text-center">{{ 'No subnets found.'|trans }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <h4 class="mt-4">{{ 'IP Ranges'|trans }}</h4>
            <div class="table-responsive">
                <table class="table card-table table-vcenter text-nowrap datatable">
                    <thead>
                        <tr>
                            <th>{{ 'Type'|trans }}</th>
                            <th>{{ 'Start IP'|trans }}</th>
                            <th>{{ 'End IP'|trans }}</th>
                            <th>{{ 'Comment'|trans }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for range in ip_ranges %}
                            <tr>
                                <td>{{ range.type }}</td>
                                <td>{{ range.start_ip }}</td>
                                <td>{{ range.end_ip }}</td>
                                <td>{{ range.comment }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="4" class="text-center">{{ 'No IP ranges found.'|trans }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
